(()=>{var e={};e=":host{display:block}:host,.overflow-page{width:100%;height:100%}.main,.overflow{height:100%;transition:transform .3s,opacity .3s,visibility .3s}.overflow-page{grid-template-columns:100% 100%;display:grid;position:relative;overflow:hidden}.overflow{opacity:0;visibility:hidden;inset:0 -100% 0 100%}.overflow-page.overflow--active .main{opacity:0;visibility:hidden;transform:translate(-100%)}.overflow-page.overflow--active .overflow{opacity:1;visibility:visible;transform:translate(-100%)}.overflow-page.overflow--rtl .overflow{inset:0 100% 0 -100%}.overflow-page.overflow--rtl.overflow--active .main{opacity:0;visibility:hidden;transform:translate(100%)}.overflow-page.overflow--rtl.overflow--active .overflow{opacity:1;visibility:visible;transform:translate(100%)}:host *{box-sizing:border-box}:host,#sentry-container,#sentry-container iframe{color-scheme:normal;background:0 0;border:0;width:100%;height:100%}#sentry-iframe{position:fixed;top:-10000px;left:-10000px}@-webkit-keyframes shimmer{0%{background-position:-100% 0}to{background-position:100% 0}}@keyframes shimmer{0%{background-position:-1200px 0}to{background-position:1200px 0}}.social-button-loader{background:linear-gradient(90deg,#f8f8f8 8%,#eee 18%,#f8f8f8 33%) 0 0/1200px 100%;animation-name:shimmer;animation-duration:2.2s;animation-timing-function:linear;animation-iteration-count:infinite;animation-fill-mode:forwards}#sentry-container.light-mode{--blue-100-rgb:224,242,255;--blue-100:rgba(var(--blue-100-rgb));--blue-200-rgb:202,232,255;--blue-200:rgba(var(--blue-200-rgb));--blue-300-rgb:181,222,255;--blue-300:rgba(var(--blue-300-rgb));--blue-400-rgb:150,206,253;--blue-400:rgba(var(--blue-400-rgb));--blue-500-rgb:120,187,250;--blue-500:rgba(var(--blue-500-rgb));--blue-600-rgb:89,167,246;--blue-600:rgba(var(--blue-600-rgb));--blue-700-rgb:56,146,243;--blue-700:rgba(var(--blue-700-rgb));--blue-800-rgb:20,122,243;--blue-800:rgba(var(--blue-800-rgb));--blue-900-rgb:2,101,220;--blue-900:rgba(var(--blue-900-rgb));--blue-1000-rgb:0,84,182;--blue-1000:rgba(var(--blue-1000-rgb));--blue-1100-rgb:0,68,145;--blue-1100:rgba(var(--blue-1100-rgb));--blue-1200-rgb:0,53,113;--blue-1200:rgba(var(--blue-1200-rgb));--blue-1300-rgb:0,39,84;--blue-1300:rgba(var(--blue-1300-rgb));--blue-1400-rgb:0,28,60;--blue-1400:rgba(var(--blue-1400-rgb));--red-100-rgb:255,235,231;--red-100:rgba(var(--red-100-rgb));--red-200-rgb:255,221,214;--red-200:rgba(var(--red-200-rgb));--red-300-rgb:255,205,195;--red-300:rgba(var(--red-300-rgb));--red-400-rgb:255,183,169;--red-400:rgba(var(--red-400-rgb));--red-500-rgb:255,155,136;--red-500:rgba(var(--red-500-rgb));--red-600-rgb:255,124,101;--red-600:rgba(var(--red-600-rgb));--red-700-rgb:247,92,70;--red-700:rgba(var(--red-700-rgb));--red-800-rgb:234,56,41;--red-800:rgba(var(--red-800-rgb));--red-900-rgb:211,21,16;--red-900:rgba(var(--red-900-rgb));--red-1000-rgb:180,0,0;--red-1000:rgba(var(--red-1000-rgb));--red-1100-rgb:147,0,0;--red-1100:rgba(var(--red-1100-rgb));--red-1200-rgb:116,0,0;--red-1200:rgba(var(--red-1200-rgb));--red-1300-rgb:89,0,0;--red-1300:rgba(var(--red-1300-rgb));--red-1400-rgb:67,0,0;--red-1400:rgba(var(--red-1400-rgb));--gray-50-rgb:255,255,255;--gray-50:rgb(var(--gray-50-rgb));--gray-75-rgb:253,253,253;--gray-75:rgb(var(--gray-75-rgb));--gray-100-rgb:248,248,248;--gray-100:rgb(var(--gray-100-rgb));--gray-200-rgb:230,230,230;--gray-200:rgb(var(--gray-200-rgb));--gray-300-rgb:213,213,213;--gray-300:rgb(var(--gray-300-rgb));--gray-400-rgb:177,177,177;--gray-400:rgb(var(--gray-400-rgb));--gray-500-rgb:144,144,144;--gray-500:rgb(var(--gray-500-rgb));--gray-600-rgb:109,109,109;--gray-600:rgb(var(--gray-600-rgb));--gray-700-rgb:70,70,70;--gray-700:rgb(var(--gray-700-rgb));--gray-800-rgb:34,34,34;--gray-800:rgb(var(--gray-800-rgb));--gray-900-rgb:0,0,0;--gray-900:rgb(var(--gray-900-rgb))}#sentry-container.dark-mode{--blue-100-rgb:0,56,119;--blue-100:rgba(var(--blue-100-rgb));--blue-200-rgb:0,65,138;--blue-200:rgba(var(--blue-200-rgb));--blue-300-rgb:0,77,163;--blue-300:rgba(var(--blue-300-rgb));--blue-400-rgb:0,89,194;--blue-400:rgba(var(--blue-400-rgb));--blue-500-rgb:3,103,224;--blue-500:rgba(var(--blue-500-rgb));--blue-600-rgb:19,121,243;--blue-600:rgba(var(--blue-600-rgb));--blue-700-rgb:52,143,244;--blue-700:rgba(var(--blue-700-rgb));--blue-800-rgb:84,163,246;--blue-800:rgba(var(--blue-800-rgb));--blue-900-rgb:114,183,249;--blue-900:rgba(var(--blue-900-rgb));--blue-1000-rgb:143,202,252;--blue-1000:rgba(var(--blue-1000-rgb));--blue-1100-rgb:174,219,254;--blue-1100:rgba(var(--blue-1100-rgb));--blue-1200-rgb:204,233,255;--blue-1200:rgba(var(--blue-1200-rgb));--blue-1300-rgb:232,246,255;--blue-1300:rgba(var(--blue-1300-rgb));--blue-1400-rgb:255,255,255;--blue-1400:rgba(var(--blue-1400-rgb));--red-100-rgb:123,0,0;--red-100:rgba(var(--red-100-rgb));--red-200-rgb:141,0,0;--red-200:rgba(var(--red-200-rgb));--red-300-rgb:165,0,0;--red-300:rgba(var(--red-300-rgb));--red-400-rgb:190,4,3;--red-400:rgba(var(--red-400-rgb));--red-500-rgb:215,25,19;--red-500:rgba(var(--red-500-rgb));--red-600-rgb:234,56,41;--red-600:rgba(var(--red-600-rgb));--red-700-rgb:246,88,67;--red-700:rgba(var(--red-700-rgb));--red-800-rgb:255,117,94;--red-800:rgba(var(--red-800-rgb));--red-900-rgb:255,149,129;--red-900:rgba(var(--red-900-rgb));--red-1000-rgb:255,176,161;--red-1000:rgba(var(--red-1000-rgb));--red-1100-rgb:255,201,189;--red-1100:rgba(var(--red-1100-rgb));--red-1200-rgb:255,222,216;--red-1200:rgba(var(--red-1200-rgb));--red-1300-rgb:255,241,238;--red-1300:rgba(var(--red-1300-rgb));--red-1400-rgb:255,255,255;--red-1400:rgba(var(--red-1400-rgb));--gray-50-rgb:29,29,29;--gray-50:rgb(var(--gray-50-rgb));--gray-75-rgb:38,38,38;--gray-75:rgb(var(--gray-75-rgb));--gray-100-rgb:50,50,50;--gray-100:rgb(var(--gray-100-rgb));--gray-200-rgb:63,63,63;--gray-200:rgb(var(--gray-200-rgb));--gray-300-rgb:84,84,84;--gray-300:rgb(var(--gray-300-rgb));--gray-400-rgb:112,112,112;--gray-400:rgb(var(--gray-400-rgb));--gray-500-rgb:144,144,144;--gray-500:rgb(var(--gray-500-rgb));--gray-600-rgb:178,178,178;--gray-600:rgb(var(--gray-600-rgb));--gray-700-rgb:209,209,209;--gray-700:rgb(var(--gray-700-rgb));--gray-800-rgb:235,235,235;--gray-800:rgb(var(--gray-800-rgb));--gray-900-rgb:255,255,255;--gray-900:rgb(var(--gray-900-rgb))}";let r=["bg-bg","cs-cz","da-dk","de-de","el-gr","en-ae","en-gb","en-hr","en-il","en-ke","en-lk","en-mo","en-mu","en-ng","en-tt","en-us","en-vn","en-xm","es-bo","es-do","es-es","es-la","es-mx","es-na","es-pa","es-py","es-sv","es-uy","et-ee","fi-fi","fil-ph","fr-ca","fr-fr","fr-ma","fr-xm","hi-in","hr-hr","hu-hu","id-id","it-it","in-id","ja-jp","ko-kr","lt-lt","lv-lv","nb-no","nl-nl","ms-my","pl-pl","pt-br","ro-ro","ru-ru","sk-sk","sl-si","sr-rs","sr-sp","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hans","zh-hant","zh-mo","zh-tw"],t=["en-us","es-es","fr-fr","sr-rs","zh-cn"],a={no:"nb-no","no-no":"nb-no"};function s(e){let s=e.toLowerCase().replace("_","-"),[n]=s.split("-"),i=a[s]||a[n];if(i)return i;if(r.includes(s))return s;let o=t.find(e=>e.startsWith(n))||r.find(e=>e.startsWith(n));return o||"en-us"}let n={LOCAL:"local",STAGE:"stage",PROD:"prod"};function i(e,r=!1){return r?n.STAGE:e.includes("localhost")?n.LOCAL:e.includes("identity-stage.adobe.com")?n.STAGE:n.PROD}class o extends Error{name="ElmError"}let g={[n.LOCAL]:"https://localhost.corp.adobe.com:8081",[n.STAGE]:"https://auth-light.identity-stage.adobe.com/sentry",[n.PROD]:"https://auth-light.identity.adobe.com/sentry"},l={[n.LOCAL]:"https://localhost.corp.adobe.com:25000",[n.STAGE]:"https://auth-light.identity-stage.adobe.com",[n.PROD]:"https://auth-light.identity.adobe.com"},b={[n.LOCAL]:"https://localhost.corp.adobe.com:4200/signin",[n.STAGE]:"https://auth-stg1.services.adobe.com/signin/v1/audit",[n.PROD]:"https://auth.services.adobe.com/signin/v1/audit"};n.LOCAL,n.STAGE,n.PROD,n.LOCAL,n.STAGE,n.PROD;let d=e=>g[e],u=e=>l[e],h=e=>b[e],p=new Map,c=new Map;async function m(e,r=!1){let t=r?p:c;if(t.has(e))return t.get(e);{var a;let s=i(window.location.href,r),n=d(s),o=(a=`${n}/${e.script}`,new Promise((e,r)=>{let t=document.createElement("script");t.src=a,document.head.appendChild(t),t.onload=e,t.onerror=r}));return t.set(e,o),o}}function v(e){try{return JSON.parse(e)}catch(r){return e}}function y(e,r,t){if(e&&Object.prototype.hasOwnProperty.call(e,r)&&"object"==typeof e[r]&&"function"==typeof e[r].subscribe){let a=e[r];a.subscribe(e=>t(v(e)))}else console.error("No port: "+r)}var f={variants:[["edu-express","EduExpress"],["sandbox","Sandbox"],["standard","Standard"]],locales:["ar-ae","bg-bg","cs-cz","da-dk","de-de","el-gr","en-ae","en-gb","en-hr","en-il","en-ke","en-lk","en-mo","en-mu","en-ng","en-tt","en-us","en-vn","en-xm","es-bo","es-do","es-es","es-la","es-mx","es-na","es-pa","es-py","es-sv","es-uy","et-ee","fi-fi","fil-ph","fr-ca","fr-fr","fr-ma","fr-xm","he-il","hi-in","hr-hr","hu-hu","id-id","in-id","it-it","ja-jp","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","ro-ro","ru-ru","sk-sk","sl-si","sr-rs","sr-sp","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hans","zh-hant","zh-mo","zh-tw"],example:"__NAME__.__LOCALE__.6a733f13.js"};let w=new Map(f.variants),_=new Map;function P(e,r){let t=w.get(e),a=s(r);if(!t)throw Error("Invalid variant.");f.locales.includes(a)||(console.warn(`Locale ${a} not found for variant ${e}, defaulting to "en-us".`),a="en-us");let n=f.example.replace("__NAME__",e).replace("__LOCALE__",a);return _.has(n)||_.set(n,{script:n,name:t,translations:f.translations}),_.get(n)}let E=["relay","client_id","locale","redirect_uri","scope","sl","response_type","dt"];document.querySelectorAll('meta[name="susi-sentry-preload"]').forEach(e=>{let r="true"===e.dataset.stage,t=e.dataset.locale,a=P(e.content,t);a&&m(a,r)});class M extends HTMLElement{renderRoot;isConstructed=!1;_authparams=null;_config=null;_variant=null;_stage=!1;_popup=!1;_autofocus=!1;module;_variantPromise=null;logMessage;_messageHandler=null;_port=null;_portMessageHandler=null;_activePopup=null;_messageChannelAttemptInterval=null;requiredParams=["authParams","config","variant"];constructor(){super();try{this.renderRoot=this.attachShadow({mode:"open"}),this.popup="true"===this.getAttribute("popup"),this.stage="true"===this.getAttribute("stage"),this.variant=this.getAttribute("variant"),this.autofocus="true"===this.getAttribute("autofocus")}catch(e){console.warn("SUSI Light - Missing parameters on init.",e)}}connectedCallback(){this.isConstructed=!0,this.attemptRenderModule()}disconnectedCallback(){this._messageHandler&&(window.removeEventListener("message",this._messageHandler),this._messageHandler=null),this._port&&(this._port.close(),this._port=null,this._portMessageHandler=null),this._messageChannelAttemptInterval&&(clearInterval(this._messageChannelAttemptInterval),this._messageChannelAttemptInterval=null),this._activePopup&&!this._activePopup.closed&&(this._activePopup.close(),this._activePopup=null)}set variant(e){e&&(this._variant=e),this.attemptRenderModule()}get variant(){return this._variant??""}get locale(){return this.authParams.locale}get popup(){return this._popup}set popup(e){this._popup="string"==typeof e?"true"===e:!!e,this.attemptRenderModule()}get stage(){return this._stage}set stage(e){this._stage="string"==typeof e?"true"===e:!!e,this.attemptRenderModule()}get darkMode(){return this.authParams?.dt}get autofocus(){return this._autofocus}set autofocus(e){console.log({val:e}),this._autofocus="string"==typeof e?"true"===e:!!e,this.attemptRenderModule()}set authParams(e){this._authparams=e,this.attemptRenderModule()}get authParams(){return this._authparams}set config(e){this._config=e,this.attemptRenderModule()}get config(){return{...this._config||{},autofocus:this.autofocus}}get systemParams(){return{mode:this.popup?"popup":"redirect"}}get appState(){if(!this.authParams)return{};let e=this.authParams.relay??function(){let e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let r=Array.from(e,e=>e.toString(16).padStart(2,"0")),t=[...r.slice(0,4),"-",...r.slice(4,6),"-",...r.slice(6,8),"-",...r.slice(8,10),"-",...r.slice(10)].join("");return t}(),r=!!this.stage,t={...this.authParams,sl:window.origin,sl_stage:r,relay:e},a=e=>E.includes(e),s=Object.fromEntries(Object.entries(t).filter(([e,r])=>r&&a(e))),n=Object.entries(t).map(([e,r])=>[e,r.toString()]);return{queryState:s,authParams:n,systemParams:this.systemParams,config:{...this.config,isRtl:function(e){let r=e.split("-")[0].toLowerCase();return["ar","he"].includes(r)}(this.locale)}}}async initializeApplication(e,r){var t,a;if(!e){console.info("Render was called without root node. Retrying.");return}let g=i(window.location.href,!!this.stage),l=(t=this.module,a=s(this.locale),g===n.LOCAL?t.translations:window.ElmTranslations[t.name][a]),b=window.Elm[this.module.name].Main.init({node:e,flags:{...this.appState,translations:l}});return b.ports&&(y(b.ports,"onOpenPopup",e=>{this._activePopup=function({url:e,title:r,w:t,h:a}){let s=void 0!==window.screenLeft?window.screenLeft:window.screenX,n=void 0!==window.screenTop?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,g=(i-parseInt(t))/2+s,l=(o-parseInt(a))/2+n,b=window.open(e,r,`
    menubar=0,
    resizable=0,
    scrollbars=no,
    width=${t}, 
    height=${a}, 
    top=${l}, 
    left=${g}
    `);return b}({url:e,title:"SUSI Light Login",w:"688",h:"768"}),this.attemptMessageChannelCommunication(this._activePopup,e,b)}),y(b.ports,"onSentryEvent",e=>{this.dispatchEvent(new CustomEvent(e.name,{detail:e.data})),"on-analytics"===e.name&&(r.postMessage(e),this.logMessage({name:"app-analytics",message:e.data}))}),y(b.ports,"onLogMessage",e=>{if("app-error"===e.name){let r=new o(e.message);this.dispatchError(r)}else this.logMessage(e)})),b}static observedAttributes=["authParams","config","stage","variant","stage","popup","autofocus"];createShadow(){return this.attachShadow({mode:"closed"})}renderModule(){this.module=P(this.variant,this.locale),this._variantPromise=m(this.module,!!this.stage),this.isConstructed&&this.render()}attemptRenderModule(){let e=this.requiredParams.filter(e=>!this[e]);if(e.length>0){console.warn(`All required parameters not yet supplied: ${e.join(", ")}`);return}let{queryState:r}=this.appState,t=i(window.location.href,!!this.stage);this.logMessage=function(e,r,t,a){let s=function(e){switch(e){case n.LOCAL:return"susi-light-local";case n.STAGE:return"susi-light-stage";case n.PROD:return"susi-light-prod";default:return"susi-light-unknown"}}(e);return function(i){if(e===n.LOCAL)return Promise.resolve();fetch(h(e),{method:"POST",headers:{"Content-Type":"application/json","X-IMS-CLIENTID":r,"X-DEBUG-ID":t},body:JSON.stringify({...i,variant:a,envName:s,clientId:r})})}}(t,String(r.client_id),String(r.relay),this.variant),this.renderModule()}async render(){var r;let t=i(window.location.href,!!this.stage),a=u(t),s=new Promise((e,r)=>{window.addEventListener("message",function t(s){if(a.includes(s.origin)&&"connection"===s.data){if(0===s.ports.length)return r(Error("Missing port"));e(s.ports[0]),window.removeEventListener("message",t)}})}),{client_id:n,relay:o}=this.appState.queryState,g=this.authParams.st_valid_origin,l=this.darkMode?"dark-mode":"light-mode";if(this.shadowRoot)this.shadowRoot.innerHTML=`
        <style>
          ${(r=e)&&r.__esModule?r.default:r}
        </style>
        <section id="sentry-container" class=${l}>
          <section id="sentry"></section>
        </section>
        <iframe
          aria-hidden="true"
          id="sentry-iframe"
          height="1px" 
          width="1px" 
          src="${function(){let e=new URL("/sentry/iframe/index.html",a);return e.searchParams.append("client_id",String(n)),e.searchParams.append("relay",String(o)),g&&e.searchParams.append("st_valid_origin","true"),e.searchParams.append("asserted_origin",window.location.origin),e.toString()}()}" />
    `;else throw Error("shadowRoot not available");try{let[e]=await Promise.all([s,this._variantPromise]),r=await this.initializeApplication(this.renderRoot.getElementById("sentry"),e),t=this.logMessage;this._messageHandler=e=>{if(["localhost.corp.adobe.com","auth-light.identity-stage.adobe.com","auth-light.identity.adobe.com"].some(r=>e.origin.includes(r)))try{let a=v(e.data),s=v(a.data);r.ports&&"query-state"===a.name&&r.ports.onPopupMessage.send(s),"open-popup-error"===a.name&&(t({name:"app-info",message:a}),r.ports&&r.ports.onPopupError&&r.ports.onPopupError.send(s))}catch(e){t({name:"app-critical",message:{error:{message:e.toString()}}})}},this._portMessageHandler=e=>{try{let a=v(e.data),s=v(a.data);r.ports&&"query-state"===a.name?r.ports.onPopupMessage.send(s):"origin-validation-status"===a.name?t({name:"app-info",message:s}):console.log(e)}catch(e){t({name:"app-critical",message:{error:{message:e.toString()}}})}},this._port=e,window.addEventListener("message",this._messageHandler),e.onmessage=this._portMessageHandler}catch(e){this.dispatchError(e)}}dispatchError(e){let r={name:"unrecoverable",error:{name:e.name,message:e.message,stack:e.stack}};this.logMessage({name:"app-error",message:r}),this.dispatchEvent(new CustomEvent("on-error",{detail:r}))}attemptMessageChannelCommunication(e,r,t){if(!e)return;let a=i(window.location.href,!!this.stage),s=this.getPopupHelperOrigin(a);this._messageChannelAttemptInterval=window.setInterval(()=>{if(!e||e.closed){this._messageChannelAttemptInterval&&(clearInterval(this._messageChannelAttemptInterval),this._messageChannelAttemptInterval=null);return}try{let r=new MessageChannel,a=r.port1,n=r.port2;a.onmessage=e=>{this.logMessage({name:"app-info",message:{messageChannelSuccess:!0,data:e.data}}),this._messageChannelAttemptInterval&&(clearInterval(this._messageChannelAttemptInterval),this._messageChannelAttemptInterval=null);try{let r=v(e.data),a=v(r.data);t.ports&&"query-state"===r.name&&t.ports.onPopupMessage.send(a),"open-popup-error"===r.name&&(this.logMessage({name:"app-info",message:r}),t.ports&&t.ports.onPopupError&&t.ports.onPopupError.send(a))}catch(r){this.logMessage({name:"app-info",message:{messageChannelParseError:r.toString(),rawData:e.data}})}a.close(),n.close()};try{e.postMessage("SEND_PORT",s,[n])}catch(e){this.logMessage({name:"app-info",message:{messageChannelPostError:e.toString(),targetOrigin:s}})}}catch(e){this.logMessage({name:"app-info",message:{messageChannelAttemptError:e.toString()}})}},250)}getPopupHelperOrigin(e){switch(e){case"local":return"https://localhost.corp.adobe.com:25000";case"stage":return"https://auth-light.identity-stage.adobe.com";default:return"https://auth-light.identity.adobe.com"}}}window.customElements.define("susi-sentry-light",M)})();
//# sourceMappingURL=wrapper.js.map
